# AI Proxy Gateway Configuration
# Copy to config.yaml and modify as needed.

# ─── Server ─────────────────────────────────────────────────────────────────
host: "0.0.0.0"
port: 8317

# TLS configuration (optional)
# tls:
#   enable: true
#   cert: "/path/to/cert.pem"
#   key: "/path/to/key.pem"

# ─── Client Authentication ──────────────────────────────────────────────────
# API keys that clients must provide via Bearer token.
# Leave empty to disable authentication (allow all requests).
api-keys: []
  # - "your-client-api-key"

# ─── Global Proxy ───────────────────────────────────────────────────────────
# Default upstream proxy for all providers. Supports http, https, socks5.
# proxy-url: "socks5://127.0.0.1:1080"
# proxy-url: "http://proxy.company.com:8080"

# ─── Debug & Logging ────────────────────────────────────────────────────────
debug: false
logging-to-file: false
# log-dir: "./logs"

# ─── Dashboard ─────────────────────────────────────────────────────────────
# Web management dashboard (optional).
# Generate password hash: htpasswd -nbBC 12 "" "your-password" | cut -d: -f2
# dashboard:
#   enabled: true
#   username: "admin"
#   password-hash: "$2b$12$..."
#   jwt-secret: "your-jwt-secret-here"     # or set DASHBOARD_JWT_SECRET env var
#   jwt-ttl-secs: 3600
#   request-log-capacity: 10000

# ─── Daemon ────────────────────────────────────────────────────────────────
# daemon:
#   pid-file: "./ai-proxy.pid"
#   shutdown-timeout: 30

# ─── Rate Limiting ─────────────────────────────────────────────────────────
# Protect upstream providers from excessive requests.
# rate-limit:
#   enabled: true
#   global-rpm: 60          # Global requests per minute (0 = unlimited)
#   per-key-rpm: 30         # Per-API-key requests per minute (0 = unlimited)

# ─── Routing Strategy ───────────────────────────────────────────────────────
routing:
  strategy: round-robin   # round-robin | fill-first

# ─── Retry Configuration ────────────────────────────────────────────────────
request-retry: 3
max-retry-interval: 30    # seconds

# ─── Timeout Configuration ─────────────────────────────────────────────────
connect-timeout: 30       # seconds, TCP connect timeout
request-timeout: 300      # seconds, total request timeout (5min for streaming)

# ─── Streaming ──────────────────────────────────────────────────────────────
streaming:
  keepalive-seconds: 15

# ─── Cost Tracking ─────────────────────────────────────────────────────────
# Custom model price overrides (USD per 1M tokens).
# Built-in prices are included for major models. Override here if needed.
# model-prices:
#   my-custom-model:
#     input: 1.0             # USD per 1M input tokens
#     output: 2.0            # USD per 1M output tokens
#   gpt-4o:
#     input: 2.50            # Override built-in price
#     output: 10.0

# ─── Provider Credentials ───────────────────────────────────────────────────
# Each provider supports multiple API keys with optional per-key settings.
#
# Per-key options:
#   api-key:          (required) API key string
#   base-url:         Custom API endpoint URL
#   proxy-url:        Per-key proxy (overrides global proxy-url)
#                     Set to "" for direct connection (bypass global proxy)
#   prefix:           Model name prefix (e.g., "teamA/")
#   models:           List of available models [{id, alias}]
#   excluded-models:  Models to exclude (supports * wildcard)
#   headers:          Custom HTTP headers sent to the upstream provider.
#                     Use this to override User-Agent or add provider-specific
#                     headers (similar to LiteLLM's extra_headers).
#   weight:           Routing weight for weighted round-robin (default: 1)

claude-api-key:
  - api-key: "sk-ant-your-claude-key"
    # base-url: "https://api.anthropic.com"
    # proxy-url: "http://proxy:8080"
    # headers:
    #   user-agent: "claude-code/2.1.62"    # Override default User-Agent
    #   anthropic-beta: "max-tokens-3-5-sonnet-2024-07-15"
    # models:
    #   - id: "claude-sonnet-4-6"
    #     alias: "sonnet"
    #   - id: "claude-opus-4-6"

openai-api-key:
  - api-key: "sk-your-openai-key"
    # base-url: "https://api.openai.com"
    # models:
    #   - id: "gpt-4o"
    #   - id: "gpt-4o-mini"

gemini-api-key:
  - api-key: "your-gemini-key"
    # base-url: "https://generativelanguage.googleapis.com"
    # models:
    #   - id: "gemini-2.0-flash"
    #   - id: "gemini-2.5-pro-preview-06-05"

# OpenAI-compatible providers (e.g., DeepSeek, Groq, Together AI)
# openai-compatibility:
#   - api-key: "your-deepseek-key"
#     base-url: "https://api.deepseek.com"
#     prefix: "deepseek/"
#     models:
#       - id: "deepseek-chat"
#       - id: "deepseek-reasoner"
